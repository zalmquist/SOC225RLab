---
title: "Homework 5"
subtitle: "Soc 225: Data & Society"
author: "PUT YOUR NAME HERE"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
---
Write all code in the chunks provided!

Remember to unzip to a real directory before running everything!

Problems should be roughly analogous to what we've done in class, with a few extensions. There are hints at the bottom of this document if you get stuck. If you still can't figure it out, go to google/stack exchange/ask a friend. Finally, email your TA or come to office hours.

# Problem 1. Purple Air

## 1.1. Set up your environment by:

a. Load the `AirSensor` package.
b. Load the `pas_us` object that you created during the lab session. Remember to put the .rda file in the same directory as your homework 5 file before loading it. 

```{r}

```

## 1.2. View a `pas` map
*Choose a state you are interested in and map its 6-hour average air quality rating.*

```{r}

```

## 1.3. Create a `pat` object. 
*Create a `pat` object from your `pas` object for a specific month. Pay attention to how to select sensors - use specific sensor names as label or use id.*
(Check the hints if you have troubles)

```{r}

```

## 1.4. Plot the `pat` object
*Create time series plots for your `pat` object.*

```{r}

```

# Problem 2. Fitbit
In this problem we will be using the same data files we used in lab: "dailyActivity_merged.csv", and "sleepDay_merged.csv".

## 2.1. Set up your environment by:
a. Load `tidyverse` package.
b. Read the csv files. Assign names `activity` and `sleep` to your data frames respectively.

```{r}

```

## 2.2. Data cleaning
*You may notice that in `sleep`, Date and Time are in the same column. Split them into separate columns to make it more clean.*
(Check the hints if you have troubles)

```{r}

```

## 2.3. Total steps vs. Calories
*Using `activity`, plot Calories against Total Steps, and discuss what you find.*
(Check the hints if you have troubles)

```{r}

```

## 2.4. Sleep and activity
*Join data frames `sleep` and `activity` by keeping all rows from `sleep` where there are matching values in `activity`.*

```{r}

```

# 2.5. Sedentary minutes and total minutes asleep
*Use the merged data frame you created in 2.2, plot Sedentary Minutes against Total Minutes Asleep. Add smoothed regression line to your plot. Label your axes and give a proper title to your plot. Discuss your findings.*

```{r}

```

## 2.6. More join
*Combine `sleep` and `activity` by returning all rows from `sleep`, and all columns from `sleep` and `activity`. Name the combined data frame `combined_sleep`.*

```{r}

```

## 2.7. More cleaning
*Create a new column under `combined_sleep` called `nonSleep_hrs` that equals to the total hours of non-sleep activities. Create another new column called `total` that equals to the sum of `nonSleep_hrs` and total sleep time.*
(Check the hints if you have troubles)
```{r}

```

## 2.8. More cleaning
*Now look at the `total` column and make a summary. Do you find anything strange? Remove those data that looks clearly wrong. Name your data frame `sleep_clean`.*
(Check the hints if you have troubles)

```{r}

```

## 2.9. More data wrangling
*With `sleep_clean`, create a new variable `heavy_mins` that equals to the sum of total `FairlyActiveMinutes` and `VeryActiveMinutes`. Create another variable `type` that contains two categories: "heavy user" that have more than 60 minutes of `heavy_mins`, and "light user" otherwise.*

```{r}

```

## 2.10. More plotting and analysis
*Now, with `sleep_clean`, plot how different types of users burn calories differently. Choose an appropriate type of visualization. Title and label your graph.*
(Check the hints if you have troubles)

```{r}

```

# Problem 3. Your own data

Now return to your own data that you've been working on. You've already created visualizations in the last homework. The next step would be to think deeply about what you should be looking for in your plots, and what type of follow-up questions you should ask. List three points about useful information you find in your graphs in homework 4, or follow-up questions. Make more plots if necessary. 

(Check the hints for ideas)
a. Point One


b. Point Two


c. Point Three


```{r}

```




Hints

1.3.
An example of selecting "Seattle" as the sensor name. You can either put an argument of `label = "Seattle"` like we did in the lab, or use the identifier:
```{r}
# example
id <- pas_getDeviceDepoymentIDs(pas_us, "^Seattle$")
pat <- pat_createNew(id = id, 
                     pas = pas_us, 
                     startdate = 20180701, 
                     enddate = 20180901)
```

2.2.
Use `separate()`

2.3.
Use `geom_point()` and `geom_smooth()`.

2.7.
Non sleep time includes Sedentary Minutes, Light Active Minutes, Fairly and Very Active Minutes. Think about how to turn minutes into hours. 

2.8.
Think about how many hours max does `total` can contain.

2.10. 
One solution is to use `geom_boxplot`.

3. 
Types of useful information and questions you can find include typical values (which values are the most common? why? which values are rare? does that match your expectations? unusual patterns and possible explanations), unusual values (data points that don't seem to fit the pattern), missing values (how to deal with unusual values) and covariation. 